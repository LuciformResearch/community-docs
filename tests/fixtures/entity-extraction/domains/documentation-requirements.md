# Requirements Specification - RagForge Entity System

Ce document teste l'extraction d'entit√©s pour le domaine **documentation**.

## Project Overview

**RagForge** is a retrieval-augmented generation system. The **Entity Extraction** feature enables automatic identification of named entities in ingested content.

## Core Concepts

### Entity Extraction

**Entity Extraction** is the process of identifying and classifying named entities (persons, organizations, products) in unstructured text. It uses **GLiNER2** as the underlying model.

### Semantic Search

**Semantic Search** goes beyond keyword matching by understanding the meaning of queries. It relies on **vector embeddings** generated by the embedding service.

### Deduplication

**Deduplication** is the process of merging duplicate entities across multiple documents. It supports multiple strategies including **fuzzy matching** and **embedding similarity**.

## Features

### F-001: Auto-domain Detection

The **Auto-domain detection** feature automatically classifies incoming text into predefined domains (ecommerce, code, legal, etc.).

- **Requirement**: REQ-001
- **Status**: Implemented in v2.0
- **Specification**: GLiNER2 integration

This feature requires the **Multi-label classification** capability.

### F-002: Cross-file Deduplication

The **Cross-file deduplication** feature identifies and merges entities that appear in multiple documents with different spellings.

- **Requirement**: REQ-002, REQ-003
- **Status**: In Development
- **Specification**: Neo4j indexes

This feature requires **Auto-domain detection** to be enabled first.

### F-003: Relationship Extraction

The **Relationship Extraction** feature identifies relationships between entities (works_for, contains, implements).

- **Requirement**: REQ-004
- **Status**: Planned for v2.1
- **Affects**: SearchService, BrainManager

## Requirements

### REQ-001: Domain Classification

The system shall classify incoming text into one or more predefined domains with confidence scores above 0.5.

- **Priority**: High
- **Version**: 2.0
- **Implements**: F-001

### REQ-002: Entity Deduplication

The system shall identify duplicate entities using fuzzy string matching with a threshold of 0.85.

- **Priority**: Medium
- **Version**: 2.0
- **Implements**: F-002

### REQ-003: Canonical Entity Resolution

The system shall maintain a single canonical representation for each unique entity.

- **Priority**: Medium
- **Requires**: REQ-002
- **Affects**: Data integrity

### REQ-004: Relation Storage

The system shall store extracted relationships as Neo4j edges between Entity nodes.

- **Priority**: Low
- **Version**: 2.1
- **Implements**: F-003

## Specifications

### GLiNER2 Integration

The **GLiNER2 integration** specification defines how the entity extraction model is deployed and accessed:

- Model: `gliner-community/gliner-large-v2`
- API Port: 6971
- Batch Size: 8
- Confidence Threshold: 0.5

### Neo4j Indexes

The **Neo4j indexes** specification defines the required database indexes:

- `entity_uuid`: Unique identifier index
- `entity_name`: Full-text search index
- `entity_type`: Entity type filter index

## Milestones

| Milestone | Version | Features |
|-----------|---------|----------|
| Alpha | 1.0 | Basic extraction |
| Beta | 2.0 | Auto-domain, Deduplication |
| GA | 2.1 | Relationship extraction |

## Component Dependencies

- **Entity Extraction** affects **SearchService**
- **Deduplication** requires **Embedding Service**
- **Auto-domain detection** belongs to **Release 2.0**
